# @configure_input@ 

mutual-information :			\
	pred_bug_counts.txt		\
	run_sets.csv			\
	pred_set_runs.csv		\
	pred_set_run_sets.csv		\
	run_sets_bug_counts.txt	\
	pred_set_runs_bug_counts.txt	\
	pred_set_run_sets_bug_counts.txt

mutual-information-tooldir := $(tooldir)/mutual-information

run_run_MI.txt run_entropy.txt normalized_run_run_MI.txt run_run_redundancy.txt : f.runs preds.txt tru.txt
	$(mutual-information-tooldir)/compute-run-run-MI --runs-directory=$(datadir) --begin-runs=$(training-runs) 

pred_pred_MI.txt pred_entropy.txt normalized_pred_pred_MI.txt pred_pred_redundancy.txt : f.runs preds.txt tru.txt
	$(mutual-information-tooldir)/compute-pred-pred-MI --runs-directory=$(datadir) --begin-runs=$(training-runs) 

#pred_sets.txt: f.runs preds.txt normalized_pred_pred_MI.txt 
	#$(mutual-information-tooldir)/compute-MI-pred-clusters --runs-directory=$(datadir)

pred_sets.txt: f.runs preds.txt pred_pred_redundancy.txt pred_entropy.txt
	$(mutual-information-tooldir)/compute-redundancy-pred-clusters --runs-directory=$(datadir)

#run_sets.txt : f.runs normalized_run_run_MI.txt
	#$(mutual-information-tooldir)/compute-MI-run-clusters --runs-directory=$(datadir) --begin-runs=$(training-runs)

run_sets.txt : f.runs run_run_redundancy.txt run_entropy.txt
	$(mutual-information-tooldir)/compute-redundancy-run-clusters --runs-directory=$(datadir) --begin-runs=$(training-runs)

pred_set_runs.txt : f.runs preds.txt tru.txt pred_sets.txt
	$(mutual-information-tooldir)/assign-runs-to-pred-sets --runs-directory=$(datadir) --begin-runs=$(training-runs)

pred_set_run_sets.txt : f.runs preds.txt tru.txt pred_sets.txt run_sets.txt
	$(mutual-information-tooldir)/assign-run-sets-to-pred-sets --runs-directory=$(datadir) --begin-runs=$(training-runs)

pred_bug_counts.txt : f.runs tru.txt preds.txt bug_runs.txt unknown_runs.txt 
	$(mutual-information-tooldir)/compute-pred-bug-counts --runs-directory=$(datadir) --begin-runs=$(training-runs)

run_sets_bug_counts.txt : f.runs run_sets.txt bug_runs.txt unknown_runs.txt
	$(mutual-information-tooldir)/calc-MI-oracle --runs-directory=$(datadir) --begin-runs=$(training-runs) < run_sets.txt > run_sets_bug_counts.txt

pred_set_runs_bug_counts.txt : f.runs pred_set_runs.txt bug_runs.txt unknown_runs.txt
	$(mutual-information-tooldir)/calc-MI-oracle --runs-directory=$(datadir) --begin-runs=$(training-runs) < pred_set_runs.txt > pred_set_runs_bug_counts.txt

pred_set_run_sets_bug_counts.txt : f.runs pred_set_run_sets.txt bug_runs.txt unknown_runs.txt
	$(mutual-information-tooldir)/calc-MI-oracle --runs-directory=$(datadir) --begin-runs=$(training-runs) < pred_set_run_sets.txt > pred_set_run_sets_bug_counts.txt

run_sets.csv : f.runs run_sets.txt 
	$(mutual-information-tooldir)/convert-csv --runs-directory=$(datadir) --begin-runs=$(training-runs) < run_sets.txt > run_sets.csv

pred_set_runs.csv : f.runs pred_set_runs.txt 
	$(mutual-information-tooldir)/convert-csv --runs-directory=$(datadir) --begin-runs=$(training-runs) < pred_set_runs.txt > pred_set_runs.csv

pred_set_run_sets.csv : f.runs pred_set_run_sets.txt 
	$(mutual-information-tooldir)/convert-csv --runs-directory=$(datadir) --begin-runs=$(training-runs) < pred_set_run_sets.txt > pred_set_run_sets.csv
